<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/home.css">
	<title>咸鱼的学习站点</title>
</head>
<body onload="RandomImgs()">
	<h1>主页</h1><a id="主页">
		<h2>
			<a class="md-toc-inner" href="#随机图片">随机图片</a><br>
			<a class="md-toc-inner" href="#pid解析">pid解析</a><br>
			<a class="md-toc-inner" href="#随机色图">随机色图</a><br>
			<a class="md-toc-inner" href="#资源存放">资源存放，可用的api</a><br>
			<a class="md-toc-inner" href="px.html">px<br>
		</h2>
		<p>总访问次数：</p>
		<img src="https://api.moedog.org/count/@:xianyu?theme=rule34" alt=":xianyu" />

	<HR align=center width=90% color=#987cb9 SIZE=1>

	<h1><a id="随机图片">随机图片</h1>
		<div>
			<button id="刷新图片" onclick="imgs()">刷新图片</button><br>
				<img src="https://iw233.cn/api.php?sort=yin" id="img1" width="50%" height="50%">
			<script>
				function imgs()
					{//刷新随机图片
						var url=Math.random();
						document.getElementById("img1").src='https://iw233.cn/api.php?sort=yin'+ '&u=' + url ;
					}
			</script>
		</div>

	<HR align=center width=90% color=#987cb9 SIZE=1>

	<h1><a id="pid解析">pid解析</h1>
		<p>不是</p>
		输入图片直链: <input type="text" id="imgurl" value=""><br>
			<button onclick="imgtool('look')">查看</button>
			<button onclick="imgtool('del')">清空</button><br>
		当前页: <input type="text" id="p" value="0">
			<button onclick="imgtool('dw')">下一页</button>
			<button onclick="imgtool('up')">上一页</button>
			<button onclick="imgtool('jump')">跳转至</button><br>
		<a id="imgtoolurl" href=""><img src="https://iw233.cn/api.php?sort=cat" id="imgs" width="80%" height="80%"></a>

		<script>
			function imgtool(air) {
				var url = document.getElementById("imgurl").value;//获取图片直链
				var jpg = url.replace(/.*_p\d+/g,"");//获取后缀
				var id = url.replace(/.*_/g,"");
				var id = id.replace(/[^0-9+]/g,"");//获取链接P数
				var p = document.getElementById("p").value;//获取当前P数
				var id1 = parseInt(p)+1;//下一页的P数
				var id2 = parseInt(p)-1;//上一页的P数
				var imgurl = url.replace(/_p.*/g,"");//获取无后缀图片连接
				if (air=='look') {//加载链接
					document.getElementById("imgs").src = url;
					document.getElementById("p").value = id;
				}
				else if (air=='del') {//清空链接
					document.getElementById("imgurl").value = "";
				}
				else if (air=='dw') {//下一页
					document.getElementById("imgs").src = imgurl + '_p' + id1 + jpg;
					document.getElementById("imgurl").value = imgurl + '_p' + id1 + jpg;
					document.getElementById("imgtoolurl").href = imgurl + '_p' + id1 + jpg;
					document.getElementById("p").value = id1;
				}
				else if (air=='up'&p!=0) {//上一页
					document.getElementById("imgs").src = imgurl + '_p' + id2 + jpg;
					document.getElementById("imgurl").value = imgurl + '_p' + id2 + jpg;
					document.getElementById("imgtoolurl").href = imgurl + '_p' + id2 + jpg;
					document.getElementById("p").value = id2;
				}
				else if (air=='jump'&p>=0) {//跳转至某一页
					document.getElementById("imgs").src = imgurl + '_p' + p + jpg;
					document.getElementById("imgurl").value = imgurl + '_p' + p + jpg;
					document.getElementById("imgtoolurl").href = imgurl + '_p' + p + jpg;
				}
				
			}
		</script>

	<HR align=center width=90% color=#987cb9 SIZE=1>

	<h1><a id="随机色图">随机色图</h1>
		<div>
			<div id="illustrate">
				<p>加载慢就是网不好</p>
				<p id="title">标题：</p>
				<p id="pid">作品ID：</p>
				<p id="author">作者：</p>
				<p id="uid">作者ID：</p>
				<p id="WH">图片尺寸：</p>
				<p id="tags">标签：</p><br>
			</div>
			<button onclick="RandomImgs()">冲冲冲！！！</button><br>
			<a id="pixivurl" href=""><img src="https://iw233.cn/api.php?sort=yin" id="pixivimg" width="80%" height="80%"></a>

			<script>
				function RandomImgs(){
				    document.getElementById("tags").innerHTML = "";
					var pixiv = new XMLHttpRequest();//建立所需的对象
					pixiv.open('GET', 'http://ovooa.com/API/Pximg/', true);//打开链接
					pixiv.send();//发送请求
					pixiv.onreadystatechange = function () {
						if (pixiv.readyState == 4 && pixiv.status == 200) {
							var json = pixiv.responseText;//获取文本
							obj = JSON.parse(json);//转换为json字符串
							//获取数据
							document.getElementById("title").innerHTML = "标题："+obj.data.title;
							document.getElementById("pid").innerHTML = "作品ID："+obj.data.pid;
							document.getElementById("author").innerHTML = "作者："+obj.data.author;
							document.getElementById("uid").innerHTML = "作者ID："+obj.data.uid;
							document.getElementById("WH").innerHTML = "图片尺寸："+obj.data.width+"*"+obj.data.height;
							document.getElementById("pixivimg").src = "https://px3.rainchan.win/img/original/"+obj.data.pid;
							document.getElementById("pixivurl").href = obj.data.urls.original;
							for (var i = 0; i < obj.data.tags.length; i++) {
								var x = obj.data.tags[i] + "；";
								var y = document.getElementById("tags").innerHTML;
								document.getElementById("tags").innerHTML = y+x;
							}
						}
					}
				}
			</script>

	<HR align=center width=90% color=#987cb9 SIZE=1>

	<h1><a id="资源存放">资源存放，可用的api</h1>
		<p>
			随机一言：https://api.moedog.org/hitokoto/<br>
			网易云：https://api.moedog.org/163/
		</p>

	<HR align=center width=90% color=#987cb9 SIZE=1>

	<h1>动画</h1>
		<p id=“model”>移动动画</p>
			<div class="" id="div1">放大动画</div>
			<button onclick="divname()">点击切换颜色</button>
			<div class="div2" id="div2">切换此处颜色</div>
		<script>
			div1.onmouseenter = function (){
    			div1.className = "newdiv1";
    		};
    		div1.onmouseleave = function (){
    			div1.className = "div1";
    		}
    		function divname() {
    			// 调用动画
    			if (div2.className=="div2") {
    				div2.className = "newdiv2";
    			}
    			else{
    				div2.className = "div2";
    			}
    		}
		</script>
</body>
</html>
